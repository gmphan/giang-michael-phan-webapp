@model ProjectView
<div class="row justify-content-center">
    <div class="col-lg-10 col-md-12">
        <div class="card mb-3">
            <h2 class="card-header">Project Activity</h2>
            <div>
                @Html.Partial("_ActivityMain", Model)
            </div>
            <div>
                @Html.Partial("_ActivityTask", Model)
            </div>
            
        </div>
    </div>
</div>
<!---this is for _ActivityMain but have to place it here for the document ready--->
@section Scripts{
    <script src="https://ajax.aspnetcdn.com/ajax/jquery/jquery-3.6.0.min.js"></script>
    <script>
        $(document).ready(function () {
            $('#topLayerEdit').submit(function (event) {
                console.log('here')
                event.preventDefault(); // Prevent default form submission
                
                $.ajax({
                    type: "POST",
                    url: $(this).attr('action'), // URL is set from asp-action="EditTopLayer"
                    data: $(this).serialize(), // Serialize form data
                    success: function (result) {
                        // Replace the result section with the returned partial view
                        $('#resultSection').html(result);
                    },
                    error: function (xhr, status, error) {
                        console.log("Error occurred: " + error);
                    }
                });
            });
        });
    </script>

    <!---this is for _ActivityTask but have to place it here for the document ready--->
    <script>
        $(document).ready(function () {
            $('#activityTask').submit(function (event) {
                event.preventDefault(); // Prevent default form submission
                console.log("here at _ActivityTask ajax")
                // Manually collect form field values
                var taskId = $('#taskDropdown').val();
                var taskDescription = $('#taskDescription').val();
                var taskState = $('#taskState').val();
                var taskStartDate = $('#taskStartDate').val();
                var taskDueDate = $('#taskDueDate').val();
                var taskCompletedDate = $('#taskCompletedDate').val();

                // Collect activity details
                var taskActivities = [];
                $('#taskActivityList input').each(function () {
                    taskActivities.push($(this).val());
                });

                // Prepare the data to be sent to the server
                var formData = {
                    SelectedTaskId: taskId,
                    TaskDescription: taskDescription,
                    TaskState: taskState,
                    TaskStartDate: taskStartDate,
                    TaskDueDate: taskDueDate,
                    TaskCompletedDate: taskCompletedDate,
                    TaskActivities: taskActivities
                };
                console.log(formData)

                // Send the data using AJAX
                $.ajax({
                    type: "POST",
                    url: $(this).attr('action'), // URL is set from asp-action="YourAction"
                    data: formData, // Pass the form data
                    success: function (result) {
                        // Replace the result section with the returned partial view
                        $('#resultSection').html(result);
                    },
                    error: function (xhr, status, error) {
                        console.log("Error occurred: " + error);
                    }
                });
            });
        });
    </script>
}